# Next.js 14 & React - μ™„λ²½ κ°€μ΄λ“

> μ¤ν„°λ””: μ›”κ°„ CS, https://github.com/monthly-cs/2024-06-nextjs  
> μ‘μ„±μΌ: 2024-07-11
> μ‘μ„±μ: dusunax

---

## Next.js λ°°ν¬

### Vercel

μ „μ²΄ μ‚°μ¶λ¬Όμ„ Node.js μ„λ²„λ΅ μ®κΈ΄λ‹¤ => dependenciesλ¥Ό μ„¤μΉν•κ³  npm start! (next start)

λ‚΄λ¶€ ν¬νΈ 3000μ„ μ™Έλ¶€ ν¬νΈ 80μΌλ΅ ν¬νΈ ν¬μ›λ”©

Vercelμ€? νμ΄μ§€μ™€ μ‚¬μ „ λλ”λ§λ νμ΄μ§€ κµ¬μ¶• => CDNμ— νΈμ¤ν… => API λΌμ°νΈλ¥Ό μ¨λ””λ§¨λ“λ΅ μ‹¤ν–‰λλ” μ„λ²„λ¦¬μ¤ ν•¨μλ΅ μ „λ‹¬

export μ‚¬μ©ν•κΈ° (μ„λ²„ μ‚¬μ΄λ“ μ½”λ“κ°€ μ—†λ” ν”„λ΅μ νΈλ¥Ό μ •μ  μ• ν”λ¦¬μΌ€μ΄μ…μΌλ΅ λ§λ“¦)
npm run build λ¨Όμ € μ§„ν–‰ ν›„, next exportλ¥Ό μ§„ν–‰ν•λ‹¤. node.js μ„λ²„κ°€ μ•„λ‹ μ •μ  νΈμ¤ν…μ— μ¬λ¦΄ μ μμ (μ΄κ±° ν”„λ΅ νΈ CI/CD μ¤ν„°λ”” ν–μ„ λ• λ‚μ™”λ λ‚΄μ©)

### Authentication

- μΈμ¦μ΄ λμ—λ‹¤. => μ •λ§λ΅?π¤”

credentialsλ΅ ν™•μΈν•λ‹¤. => Server-side Sessionsκ³Ό Authentication Tokens λ°©μ‹

#### server-side sessions

μ„λ²„μ— μ‹λ³„μλ¥Ό λ³΄κ΄€, ν΄λΌμ΄μ–ΈνΈμ— μ „μ†΅

ν΄λΌμ΄μ–ΈνΈλ¥Ό μΏ ν‚¤μ— μ‹λ³„μλ¥Ό λ‹΄μ•„μ„ μ”μ²­ => μ„λ²„κ°€ μ”μ²­μ μ‹λ³„μλ¥Ό μ²΄ν¬ν•΄μ„ λ§λ” μ§€ ν™•μΈ => μ•΅μ„Έμ¤ κ΄€λ¦¬

λ³΄μ•μ€?

- μ—°κ²°μ—λ” SSLλ¥Ό μ‚¬μ©ν•λ‹κΉ λ„λ‚x
- Cross-site scripting κ³µκ²© λ°©μ§€λ¥Ό μ„ν•΄μ„ javascriptλ΅ μΏ ν‚¤μ— μ ‘κ·Όν•  μ μ—†λ„λ΅ κµ¬μ„±ν•  μ μλ‹¤ (μ½”λ“λ΅ μ ‘κ·Ό μ•λλ‹κΉ, μ”μ²­μ— μ²¨λ¶€λμ–΄ λ‚κ°”μ„ λ• μ„λ²„μ—μ„λ§ μ½λ„λ΅ ν•¨)
  - Cross-site scripting κ³µκ²©μ΄ μ—†λ‹¤λ©΄ μ•μ „!

#### authentication token

μ„λ²„λ” ν† ν°μ„ μƒμ„±, ν΄λΌμ΄μ–ΈνΈμ— μ „μ†΅

ν΄λΌμ΄μ–ΈνΈλ¥Ό ν† ν°κ³Ό ν•¨κ» μ”μ²­ => μ„λ²„κ°€ μ ν¨ν• ν† ν°μΈμ§€ ν™•μΈ => μ•΅μ„Έμ¤ κ΄€λ¦¬

### SPA κ°λ°μ—μ„ sessionλ³΄λ‹¤ tokenμ„ λ§μ΄ μ“°λ” μ΄μ 

- νμ΄μ§€λ” μ§μ ‘ μ „λ‹¬λ¨ (μ„λ²„μ—μ„ νμ΄μ§€λ¥Ό λ‚΄λ ¤μ£Όλ” κ²ƒμ΄ μ•„λ‹)
- SPAμ λ°±μ—”λ“ apiλ” stateless (μ—°κ²°λ ν΄λΌμ΄μ–ΈνΈλ¥Ό μ¶”μ ν•μ§€ μ•λ”λ‹¤)
  - μΈμ¦λ ν΄λΌμ΄μ–ΈνΈμ— permission μ „λ‹¬ => λ³΄νΈλ λ¦¬μ†μ¤ μ•΅μ„Έμ¤λ¥Ό λ‚μ¤‘μ— μ”μ²­
  - APIλ” μ—°κ²°λ ν΄λΌμ΄μ–ΈνΈμ— λ€ν• μ •λ³΄ x

μ‹±κΈ€ νμ΄μ§€ μ• ν”λ¦¬μΌ€μ΄μ…μ€ λ°±μ—”λ“μ—μ„ ν΄λΌμ΄μ–ΈνΈλ¥Ό μ¶”μ ν•μ§€ μ•λ” statelessμ΄κ³ , νμ΄μ§€λ¥Ό μ„λ²„μ—μ„ λ‚΄λ ¤μ£Όλ” κ²ƒμ΄ μ•„λ‹λ―€λ΅ λ°±μ—”λ“μ™€ ν”„λ΅ νΈκ°€ λ¶„λ¦¬λμ–΄ μλ‹¤. λ”°λΌμ„ μ‹λ³„μλ¥Ό μ„λ²„μ—μ„ λ³΄κ΄€ν•κ³  μ•΅μ„Έμ¤λ¥Ό κ΄€λ¦¬ν•λ” μ„Έμ… λ°©μ‹λ³΄λ‹¤ JWTμ„ μ‚¬μ©ν•λ” κ²½ν–¥μ΄ μλ‹¤. κ¶ν•(ν† ν°)μ„ μ „λ‹¬ν•κ³  μ¶”ν›„μ— μ•μ•„μ„ λ³΄νΈλ λ¦¬μ†μ¤μ— μ”μ²­μ„ λ³΄λƒμ„ λ•, ν† ν° μ ν¨ μ—¬λ¶€λ§ νλ‹¨ν•λ” λ°©μ‹.

μ΄λ° μ‹μΌλ΅ SPAμ—μ„ κ°μ μ•μ•„μ„ ν•λ” λ°©μ‹ λ•λ¬Έμ— ν”„λ΅ νΈλ‘ λ°± κ°λ°μ΄ μμ—°μ¤λ½κ² λ¶„λ¦¬λμ—λ κ²ƒ μ•„λ‹κΉ.
