# Next.js 14 & React - 완벽 가이드

> 스터디: 월간 CS, https://github.com/monthly-cs/2024-06-nextjs  
> 작성일: 2024-06-05
> 작성자: dusunax  
> 감기 이슈🤕

---

## Next.js

## 섹션 3: NextJS 핵심 (앱 라우터)

- App route를 살펴보자.
  - 파일 기반 라우팅
  - 서버 컴포넌트는 랜더되고 HTML로 변환되어 브라우저에 전송됨
- 페이지 첫 방문 = 백엔드 랜더
- 클라이언트 자바스크립트 코드로 업데이트 된다.

### Layout

- root layout 필요. page의 래퍼 역할
- head가 없는 이유
  - 해당 레이아웃의 metadata 객체 사용

### Icon

- `app/icon.*`이 favicon이다.

### 파일 컨벤션

- 컴포넌트 소문자로 쓰는 경우? Next.js의 보호된 파일명과 통일성을 위해서 header.js와 같이 사용하는 경우.

| 파일                 | 내용                                                                                                                                                                                                      |
| -------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| default.js           | Next.js가 전체 페이지 로드 후 슬롯의 활성 상태를 복구할 수 없을 때 병렬 라우트 내에서 폴백을 렌더링하는 데 사용됨                                                                                         |
| error.js             | 경로 세그먼트에 대한 오류 UI 경계를 정의함. 서버 컴포넌트와 클라이언트 컴포넌트에서 발생하는 예상치 못한 오류를 잡아내고 폴백 UI를 표시함                                                                 |
| instrumentation.js   | 애플리케이션에 모니터링 및 로깅 도구를 통합함. 애플리케이션의 성능과 동작을 추적하고, 프로덕션에서 문제를 디버그함                                                                                        |
| layout.js            | 경로 간에 공유되는 UI를 정의함. 루트 레이아웃은 루트 앱 디렉터리에서 최상위 레이아웃으로, 응용 프로그램의 다른 부분에서 공유되는 UI를 정의함                                                              |
| loading.js           | Suspense를 기반으로 즉각적인 로딩 상태를 생성함. 기본적으로 이 파일은 서버 컴포넌트이지만, "use client" 지시문을 통해 클라이언트 컴포넌트로도 사용할 수 있음                                              |
| middleware.js        | Middleware를 작성하고 요청이 완료되기 전에 서버에서 코드를 실행함. 들어오는 요청에 따라 응답을 재작성, 리디렉션, 요청 또는 응답 헤더 수정, 또는 직접 응답을 수정할 수 있음                                |
| not-found.js         | 경로 세그먼트 내에서 `notFound` 함수가 호출될 때 UI를 렌더링함. 맞춤 UI를 제공함과 동시에, Next.js는 스트리밍 응답에 대해 200 HTTP 상태 코드를 반환하고 비스트리밍 응답에 대해서는 404 상태 코드를 반환함 |
| page.js              | 경로에 고유한 UI를 정의한다. `params`와 `searchParams` props를 포함할 수 있음                                                                                                                             |
| route.js             | Web Request 및 Response API를 사용하여 주어진 경로에 대한 사용자 정의 요청 핸들러를 만들 수 있음                                                                                                          |
| Route Segment Config | 페이지, 레이아웃 또는 라우트 핸들러의 동작을 구성할 수 있는 옵션을 제공함                                                                                                                                 |
| template.js          | 템플릿 파일은 각 자식 레이아웃이나 페이지를 래핑 => 레이아웃이 경로 간에 상태를 유지하는 것과 달리, 템플릿은 내비게이션 시 각 자식에 대한 새로운 인스턴스를 생성한다                                      |
| Metadata Files       | 메타데이터 파일 `favicon`, `icon`, `apple-icon`, `manifest.json`, `robots.txt`, `opengraph-image`, `sitemap.xml`                                                                                          |
