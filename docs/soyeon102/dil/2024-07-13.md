### Providerë¡œ ìµœì í™”

- ì´ë¯¸ ë³´í˜¸ëœ í˜ì´ì§€ì„ì—ë„ ë¶ˆêµ¬í•˜ê³  Navigationê³¼ ê°™ì€ ê³³ì—ì„œ sessionì„ ì²´í¬í•˜ê³  ìˆë‹¤ë©´ sessionìš”ì²­ì´ ë‘ ë²ˆ ë°œìƒí•˜ê²Œ ëœë‹¤.
- ì´ë¥¼ Appì»´í¬ë„ŒíŠ¸ì—ì„œ `next-auth/client`ì˜ `Provider`ë¡œ ê°ì‹¸ ë¶ˆí•„ìš”í•œ sessionìš”ì²­ì„ ì¤„ì¼ ìˆ˜ ìˆë‹¤.

```jsx
import { Provider } from "next-auth/client";
import Layout from "../components/layout/layout";

function MyApp({ Component, pageProps }) {
  return (
    <Provider session={pageProps.session}>
      <Layout>
        <Component {...pageProps} />
      </Layout>
    </Provider>
  );
}

export default MyApp;
```

```jsx
// profile.js
export default function ProfilePage() {...}

export async function getServerSideProps(context) {
	...
  return {
    props: { session },
  };
}
```

- `pageProps`ëŠ” í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì„œë²„ ì‚¬ì´ë“œ ë˜ëŠ” ì •ì  ìƒì„± ê³¼ì •ì—ì„œ ë°˜í™˜ëœ propsë¥¼ ë°›ì•„ì˜¨ë‹¤.
- ë”°ë¼ì„œ `/profile`ì— ì§„ì…í•˜ê²Œ ë˜ë©´ `Provider`ì˜ sessionì— ë°˜í™˜ëœ ê°’ì´ ë“¤ì–´ê°„ë‹¤.

> ğŸ’¡ Provider ë˜í¼ë¥¼ ì¶”ê°€í•´ next-authê°€ ë‚´ë¶€ ì½”ë“œë¥¼ ìµœì í™”í•˜ê³  HTTP ìš”ì²­ì„ ì¤„ì¼ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•´ ê°ì‹¸ì¤€ë‹¤.

<br/>

### API ë¼ìš°íŠ¸ ë³´í˜¸

- apië¼ìš°íŠ¸ì—ì„œë„ ì¸ì¦ëœ ì‚¬ìš©ìê°€ ë³´ë‚¸ ìš”ì²­ì¸ì§€ í™•ì¸ í•„ìš”
- `handler`í•¨ìˆ˜ ë‚´ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ `getSession()`ìœ¼ë¡œ ì¸ì¦ëœ ì‚¬ìš©ìì¸ì§€ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

```jsx
// pages/api/user/chage-password.js
import { getSession } from "next-auth/client";

async function handler(req, res){
  if(req.method !== 'PATCH') {
    return;
  }

  const session = await getSession({ req: req });

  if (!session) {
    res.status(401).json({ message: "Not authenticated!" });
    return;
  }

  ...
}

export default handler
```
