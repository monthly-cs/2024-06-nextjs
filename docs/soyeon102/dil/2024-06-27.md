## NextJS Page Router

### íŒŒì¼ ê¸°ë°˜ ë¼ìš°íŒ…

- Reactì—ì„œ ê¸°ì¡´ì— `react-router-dom`ì„ í™œìš©í•´ routeë¥¼ ì„¤ì •í–ˆì—ˆìœ¼ë‚˜ NextJSì—ì„œëŠ” íŒŒì¼ì„ ê¸°ë°˜ìœ¼ë¡œ routeë¥¼ ì„¤ì •í•œë‹¤.
- ë”°ë¼ì„œ ê²½ë¡œë¥¼ ì„¤ì •í•˜ëŠ” ê²ƒì— ëŒ€í•œ ì½”ë“œë¥¼ ì‘ì„±í•´ì¤„ í•„ìš”ê°€ ì—†ë‹¤.
- ëª¨ë“  ê²½ë¡œëŠ” `pages`í´ë” ë‚´ë¶€ì—ì„œ ì¸ì‹ë˜ë©° `index.js`, `ê²½ë¡œëª….js`ì˜ í˜•íƒœë¡œ ë§Œë“¤ì–´ì£¼ë©´ ëœë‹¤.
- `index.js`íŒŒì¼ì€ ë¶€ëª¨ í´ë”ì˜ ê²½ë¡œë¥¼ ì˜ë¯¸í•˜ê³  `ê²½ë¡œëª….js`ëŠ” íŒŒì¼ëª… ê·¸ ìì²´ê°€ ê²½ë¡œê°€ ëœë‹¤.

```
pages/
â”œâ”€ index.js      => /
â”œâ”€ about.js      => /about
â”œâ”€ products/
â”‚  â”œâ”€ index.js   => /products
â”‚  â”œâ”€ [id].js    => /products/[id]
```

> ğŸ’¡ íŒŒì¼ëª…ì„ ê²½ë¡œë¡œ ì„¤ì •í•˜ê¸°ë³´ë‹¨ í´ë”ë¥¼ ìƒì„±í•´ í•˜ìœ„ì— `index.js`ë¥¼ ë§Œë“œëŠ” ê²ƒì´ ê²½ë¡œì˜ í™•ì¥ì„±ì„ ë†’ì—¬ì£¼ê³  íŒŒì¼ì„ ì²´ê³„ì ìœ¼ë¡œ ì •ë¦¬í•  ìˆ˜ ìˆë‹¤.

<br/>

### ë™ì  ë¼ìš°íŒ…

- `pages/products/[id].js`ì™€ ê°™ì´ ë™ì  ê²½ë¡œë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ `useRouter`í›…ìœ¼ë¡œ í•´ë‹¹ ë™ì  ì„¸ê·¸ë¨¼íŠ¸ ê°’ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.
- `router.query`ì— ë™ì  ì„¸ê·¸ë¨¼íŠ¸ ê°’ì´ ë“¤ì–´ìˆë‹¤.

```jsx
// pages/products/[id].js
import { useRouter } from "next/router";

export default function ItemPage() {
  const router = useRouter();
  return <div>Item Page</div>;
}
```

<img width="372" alt="Untitled" src="https://github.com/monthly-cs/2024-06-nextjs/assets/84265783/9464783f-46c4-46d2-987a-f1a772f9a8bc">

<br/>

### Catch-all ë¼ìš°íŠ¸

- `[â€¦slug].js`íŒŒì¼ì„ ìƒì„±í•´ ëª¨ë“  ë™ì  ê²½ë¡œë¥¼ ë°°ì—´ í˜•íƒœë¡œ ë°›ì•„ì˜¬ ìˆ˜ ìˆë‹¤.
- ì´ ë•Œë„ `router.query` ê°’ì„ ì‚¬ìš©í•´ ë™ì  ì„¸ê·¸ë¨¼íŠ¸ ê°’ì„ ê°€ì ¸ì˜¨ë‹¤.

```jsx
// pages/blog/[...slug].js
import { useRouter } from "next/router";

export default function ItemPage() {
  const router = useRouter();

  // blog/2024/06/posts ì ‘ê·¼ ì‹œ
  console.log(router.query); // {slug: ['2024', '06', 'posts']}
  return <div>Item Page</div>;
}
```

<br/>

### Link

- `<a>`ëŒ€ì‹  Client-side navigationì¸ `<Link>`ë¥¼ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ ê¸°ì¡´ SPAì˜ íŠ¹ì„±ì„ ìœ ì§€í•œë‹¤.
- `replace`ì†ì„±ì„ ì¶”ê°€í•˜ë©´ ë¸Œë¼ìš°ì € ê¸°ë¡ì— í•´ë‹¹ URLì„ ì¶”ê°€í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì´ ê²½ë¡œë¥¼ í˜„ì¬ ê¸°ë¡ ìƒíƒœë¡œ ëŒ€ì²´í•œë‹¤. ì´ ê²½ìš°, ë’¤ë¡œ ê°€ê¸°ë¥¼ í•´ë„ ì´ì „ í˜ì´ì§€ê°€ ëœ¨ì§€ ì•ŠëŠ”ë‹¤.

```jsx
import Link from "next/link";

<Link replace href="/products">
  Products
</Link>;
```

- `href`ì†ì„±ì— ê²½ë¡œë¥¼ ì§ì ‘ ì…ë ¥í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ê°ì²´ í˜•íƒœë¡œ ê°’ì„ ì „ë‹¬í•´ì¤„ ìˆ˜ ìˆë‹¤.

```jsx
function Posts({ posts }) {
  return (
    <ul>
      {posts.map((post) => (
        <li key={post.id}>
          <Link
            href={{
              pathname: "/blog/[slug]",
              query: { slug: post.id },
            }}
          >
            {post.title}
          </Link>
        </li>
      ))}
    </ul>
  );
}

export default Posts;
```

> ğŸ’¡ ì•± ë¼ìš°í„°ì—ì„œ ìœ„ì™€ ê°™ì€ í˜•ì‹ìœ¼ë¡œ ì‘ì„± ì‹œ ì•„ë˜ì™€ ê°™ì€ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.

<img width="522" alt="Untitled 1" src="https://github.com/monthly-cs/2024-06-nextjs/assets/84265783/5528bf71-3a63-4caf-b539-d8ac7154d0b6">

<br/>

### useRouterë¥¼ ì‚¬ìš©í•œ ê²½ë¡œ ì´ë™

- `Link`ëŒ€ì‹ ì— `useRouter()`ë¡œ ê²½ë¡œë¥¼ ì´ë™í•  ìˆ˜ ìˆë‹¤.
- `router`ë¥¼ ì„ ì–¸í•´ì£¼ê³  `router.push`ì— ê²½ë¡œë¥¼ ë¬¸ìì—´ ë˜ëŠ” ê°ì²´í˜•íƒœë¡œ ë„£ëŠ”ë‹¤.

```jsx
import { useRouter } from "next/router";

const router = useRouter();
const routeHandler = () => {
  router.push("/products/test1/test2");
  // OR
  router.push({
    pathname: "/products/[id]/[projectid]",
    query: { id: "test1", projectid: "test2" },
  });
};

<button onClick={routeHandler}>click</button>;
```

<br/>

### 404í˜ì´ì§€

- `pages/`í´ë” í•˜ìœ„ì— `404.js`íŒŒì¼ì„ ìƒì„±í•´ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ë¡œì— ì ‘ê·¼í•œ ê²½ìš°ì— ì˜¤ë¥˜ í˜ì´ì§€ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤.
- ì•± ë¼ìš°í„°ì²˜ëŸ¼ ê²½ë¡œë§ˆë‹¤ ê°ì ë‹¤ë¥¸ `not-found.js`ë¥¼ ì„¤ì •í•˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥í•˜ê³ , ì˜¤ì§ `pages/` ë°”ë¡œ í•˜ìœ„ì— ìˆëŠ” `404.js`ë§Œ ë™ì‘í•œë‹¤.
