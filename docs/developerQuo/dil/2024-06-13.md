## Routing and Page Rendering

### Loading UI and Streaming

- loading.js 파일에 컴포넌트를 만들면 브라우저가 로딩할 때, 화면에 로딩 컴포넌트를 띄워준다. Suspense 컴포넌트와 함께 사용하면 원하는 컴포넌트만 로딩중일 때 메시지를 띄울 수 있다.
- 네비게이션은 중단될 수 있다. 다른 경로로 이동할 때는 콘텐츠가 전부 로드될 때까지 기다릴 필요 없이 이동할 수 있다.
- **스트리밍이란?**
  - SSR 작동 원리 - 로딩을 보여주는 건 좋지만, 속도는 변함 없다.
    1. 서버에 페이지에 대한 데이터가 준비된다.
    2. 서버는 페이지의 HTML을 렌더링한다.
    3. 페이지의 HTML, CSS, JS을 클라이언트에 보낸다.
    4. 상호작용이 불가능한 HTML 페이지를 유저에게 보여준다.
    5. 리액트는 하이드레이션을 해서 상호작용 가능하게 만든다.
  - 스트리밍은 페이지의 HTML을 작은 청크 단위로 쪼개서 점진적으로 서버에서 클라이언트로 보낸다.
  - 데이터 로드를 기다릴 필요 없이 페이지의 일부를 더 빨리 보여준다.
  - 우선 순위가 높거나 데이터와 상관없는 컴포넌트는 먼저 보내져서 하이드레이션 될 수 있다. 우선 순위가 낮은 컴포넌트는 그들의 데이터가 도착한 뒤, 뒤이어 보내질 수 있다.
  - `Suspense`는 비동기 액션(fetch data)가 있는 컴포넌트를 래핑하여 fallback UI(spinner)를 보여주며 작동한다.
  - `Suspense`를 쓰면, 점진적 HTML 렌더링과 선택적 하이드레이션이 가능하다.

### Error Handling

작동 방식

- 자식 컴포넌트를 래핑하면, error.js가 React Error Boundary를 생성한다.
- 에러가 발생하면, error.js의 컴포넌트가 fallback 컴포넌트로 사용되어 렌더링된다.
- 다시 시도 가능한 에러는 `reset()` 함수를 통해 사용자가 복구를 시도하도록 유도한다.
